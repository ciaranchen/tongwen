# 希望实现的关键词和语句

当前做得最突出最有特色的中文编程项目非“wenyan-lang”文言莫属。文言lang提供了其语言规范的g4文件，其中statement部分的表述如下。

由下面可见，其语句相对于其它语言来讲不是很多，我打算在它的基础上参考Python和Haskell的语法进行拓展。Python和Haskell的g4文件，可以从 [ANTLR的这个仓库](https://github.com/antlr/grammars-v4) 中获得。当然我们期望的最终产物就是一个可以用ANTLR生成的g4文件。

```g4
statement                   : declare_statement
                            | define_statement
                            | print_statement 
                            | for_statement
                            | function_statement
                            | if_statement
                            | return_statement
                            | math_statement
                            | assign_statement
                            | import_statement
                            | object_statement
                            | reference_statement
                            | array_statement
                            | flush_statement 
                            | BREAK
                            | comment;
```

文言lang句法的特点就是太啰嗦，明明是一个字可以表达的，却使用了多个字来进行表达。

接下来将列出我预想的实现方式和文言的句法之间的对比。

## 句法对比

| Statement                     | 文言g4                                                                                                                                                                                                            | 文言语法                                                       | TypeScript                                | 新语法                                 |
| ----------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------- | ----------------------------------------- | ----------------------------------- |
| declare_statement             | `('吾有'\|'今有') INT_NUM TYPE ('曰' data)*;`                                                                                                                                                                        | `吾有一數。`<br/>`今有一數曰三。`                                      |                                           |                                     |
| define_statement              | `(declare_statement name_multi_statement)\| '有' TYPE data (name_single_statement)?;`                                                                                                                            | `吾有一數曰三。名之曰「甲」`<br/>`有數三名之曰「甲」`                            | `let a = 3;`                              | `有数者以3为甲。`<br/>`有以3为甲。`<br/>`有数者甲。` |
| assign_statement              | `'昔之' IDENTIFIER ('之' (INT_NUM\|STRING_LITERAL\|IDENTIFIER))? '者' (('今' ((data ('之' INT_NUM)?)\|'其') '是矣')\|'今不復存矣') ;`                                                                                         | `昔之「甲」者。今「大衍」是矣。`                                          | `a = dayan;`                              | `以 大衍 为 甲。`<br/>`甲 不复也。`            |
| print_statement               | `'書之'`                                                                                                                                                                                                          | `書之`                                                       | `console.log`                             | `输出`                                |
| if_statement                  | `IF if_expression '者' statement+ (ELSE statement+)? FOR_IF_END ;`                                                                                                                                               | `若三大於二者。乃得「「想當然耳」」也。`                                      | `if (3>2){ return "of course"; }`         | `若 （其 3 大于 2） {得 “确实”。}`            |
| for_arr_statement             | `FOR_START_ARR   IDENTIFIER            FOR_MID_ARR  IDENTIFIER statement* FOR_IF_END ;`                                                                                                                         | `凡「天地」中之「人」。⋯⋯ 云云。`                                        | `for (var human of world){ ... }`         | `凡（天地 中为 人）{...}`                   |
| for_enum_statement            | `FOR_START_ENUM (INT_NUM\|IDENTIFIER) FOR_MID_ENUM statement* FOR_IF_END ; `                                                                                                                                    | `為是百遍。⋯⋯ 云云。`                                              | `for (var i = 0; i < 100; i++){ ... }`    | `凡（1至100 中为 甲）{...}`                |
| for_while_statement           | `FOR_START_WHILE statement* FOR_IF_END ;`                                                                                                                                                                       | `恆為是。⋯⋯ 云云。`                                               | `while (true) { ... }`                    | `当 （阳） {} `                         |
| function_define_statement     | `'吾有' INT_NUM '術' name_single_statement ('欲行是術' '必先得' (INT_NUM TYPE ('曰' IDENTIFIER)+)+)? ('是術曰'\|'乃行是術曰') statement* '是謂' IDENTIFIER '之術也' ;`                                                                  | `吾有一術。名之曰「甲」。欲行是術。必先得一數曰「乙」。二言。曰「丙」。曰「丁」`                  | `function a(float b, string c, string d)` | `有术者甲由数者乙、言者丙、言者丁求数。`               |
|                               |                                                                                                                                                                                                                 |                                                            |                                           |                                     |
| function_pre_call_statement   | `('施' IDENTIFIER (preposition data)*)\|('施其' (preposition data)*) ;`                                                                                                                                            | `施「翻倍」於「大衍」。`                                              | `double(dayan);`                          | `倍（大衍）。`                            |
| function_post_call            | `('取' INT_NUM '以施' IDENTIFIER)+ ;`                                                                                                                                                                              | `夫「甲」。夫「乙」。取二以施「丙」。`                                       | `c(b,a)`                                  | `取甲、乙 倍之。`<br/>`取甲、乙、丙 二者 倍之。`      |
| function_mid_call             | -                                                                                                                                                                                                               | -                                                          | ``a `add` b``(Haskell)                    | `其 甲 加于 乙`                          |
| return_statement              | `return_statement            : '乃得' (data\|'其')\|'乃歸空無'\|'乃得矣' ;`                                                                                                                                               | `乃得「乙」。`                                                   | `return b;`                               | `乃得 乙。`<br/>`乃得 空。`<br/>`乃得。`       |
| math_statement                | 略                                                                                                                                                                                                               |                                                            |                                           |                                     |
| object_statement              | `object_statement            : '吾有' INT_NUM '物' name_multi_statement (object_define_statement)? ;` <br/>`object_define_statement     : '其物如是' ('物之' STRING_LITERAL '者' TYPE '曰' data)+ '是謂' IDENTIFIER '之物也' ;` | `吾有一物。名之曰「甲」。其物如是。物之「「乙」」者。數曰三。物之「「丙」」者。言曰「「丁」」。是謂「甲」之物也。` | `var a = {b:3, c:"d"}`                    | `合{数者3为丙，“丁”为丙}为甲。`                 |
| DOT_expr（reference_statement） | `'夫' data ('之' (STRING_LITERAL\|INT_NUM\|'其餘'\|IDENTIFIER\|'長'))? name_single_statement? ;`                                                                                                                     |                                                            |                                           | `的`<br/>`内`                         |
| import_statement              |                                                                                                                                                                                                                 |                                                            |                                           |                                     |

### Declare Statement、Define Statement 声明语句

文言lang的声明语句有点啰嗦，而且标识符可以去掉`「」`。中文由于一字多义，确实可能出现与关键词冲突的情况，但是避免与关键词冲突应该是使用该语言的开发者的工作，而不是语言设计者的责任。文言lang中为了避开常用字或者想避免在文本中出现太多空格，所以使用了这些词，在输入时会造成很大不便。我自己觉得可以接受语言中使用空格拆分不同的标识符，但是确实能合并起来可以更优雅，我决定先保留有空格的写法。日后如果有更好的调整方法，可以再进行改变。

文言Lang会将`。`或者`、`当做文本分隔符跳过，这也很符合文言文没有句读的特点。但是如果我不希望有句读，那么我应该直接不写标点，而不是写了之后在语法上没有意义。所以我觉得从语法设计上来讲，我希望文本中更多出现标点符号。

我也不希望排斥阿拉伯数字，我的目标是在不离开中文输入法的时候就能完成中文的编程。数字完全是可以在输入中文的同时输入的，没有必要抽象到过去的大写汉字过程。

这些很符合文言lang的特点，但是不符合能方便使用的编程语言的特点。

### assign statement

啰嗦。

### print_statement

我觉得这应该不是关键字，而是一个内置的函数。

而且我觉得应该简单一点，输出就是输出。

### if_stmt

同样的道理，我觉得也不应该排斥中文输入时会按出来的符号，比如 `{}` 。但是对于一些传统上在英文条件下按出来的符号，我打算把他们换成中文的版本。

`return` 换为 `得`

### for_statement 循环语句

关于 for_arr_statement，我喜欢这种先内容后名字的顺序，但是我觉得`中之` 太长了，所以换为 `中`。而且应该允许在循环开始时定义变量，后期应该体现这一点。

关于 for_enum_statement，丢失了迭代值`i`，我希望是类似Python的range那样处理一个这样的列表。

关于 for_while_statement，对于布尔值，使用了文言lang中相似的阴阳概念。

### function_statement 函数语句

定义匿名函数。由…求type。
